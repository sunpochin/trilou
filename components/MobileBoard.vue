<!--
  üì± ÊâãÊ©üÁâàÁúãÊùøÁµÑ‰ª∂ - Â∞àÁÇ∫Ë°åÂãïË£ùÁΩÆÂÑ™Âåñ
  
  üéØ Ê†∏ÂøÉÂäüËÉΩÔºö
  ‚úÖ ÈõôÊ®°ÂºèÂàáÊèõÁ≥ªÁµ±
     - ÊªëÂãïÊ®°ÂºèÔºàÈ†êË®≠ÔºâÔºöÂ∑¶Âè≥ÊªëÂãïÁÄèË¶ΩÂàóË°®
     - ÊéíÂ∫èÊ®°ÂºèÔºöÊãñÊõ≥ÂàóË°®‰∫§Êèõ‰ΩçÁΩÆ
  
  ‚úÖ ÂàóË°®ÊãñÊõ≥ÂäüËÉΩ
     - ÊãñÊõ≥ÊääÊâãË®≠Ë®àÔºöÈï∑Êåâ 0.3 ÁßíÂïüÂãï
     - Ë¶ñË¶∫ÊèêÁ§∫ÔºöÁÅ∞Ëâ≤ÊääÊâãÂçÄÂüü + ÊñáÂ≠óË™™Êòé
     - ÊµÅÊö¢ÂãïÁï´Ôºö200ms ÈÅéÊ∏°ÊïàÊûú
  
  ‚úÖ Âç°ÁâáÊãñÊõ≥ÂäüËÉΩ  
     - Èï∑Êåâ 0.75 ÁßíÂïüÂãïÂç°ÁâáÊãñÊãΩ
     - ÊîØÊè¥Ë∑®ÂàóË°®ÁßªÂãï
     - Fallback Ê®°ÂºèÁ¢∫‰øùÊâãÊ©üÁõ∏ÂÆπÊÄß
  
  üì± ‰ΩøÁî®ÊñπÂºèÔºö
  1. ÈªûÂè≥‰∏ãËßíËóçËâ≤ÊåâÈàï ‚Üí ÈÄ≤ÂÖ•ÊéíÂ∫èÊ®°Âºè
  2. Èï∑ÊåâÂàóË°®‰∏äÊñπÁÅ∞Ëâ≤ÊääÊâã ‚Üí ÊãñÂãïÂàóË°®
  3. ÈªûÁ∂†Ëâ≤ÊåâÈàï ‚Üí ÂõûÂà∞ÊªëÂãïÊ®°Âºè
  
  üîß ÊäÄË°ìÂØ¶‰ΩúÔºö
  - vue-draggable-nextÔºöËôïÁêÜÊãñÊãΩ
  - snap-scrollÔºöÂàóË°®ÊªëÂãïÂ∞çÈΩä
  - @vueuse/gestureÔºöÊâãÂã¢ÊéßÂà∂
  - ÂÆåÊï¥ CRUD ÂäüËÉΩ
-->

<template>
  <!-- ÊâãÊ©üÁâàÁúãÊùøÂÆπÂô® -->
  <div 
    ref="boardContainerRef"
    style="margin: 0; padding: 0; width: 100vw; box-sizing: border-box; position: relative;"
    class="block overflow-y-auto mobile-container gap-4 h-[85vh] bg-gray-100 font-sans"
    @contextmenu.prevent
    @selectstart.prevent
  >
    
    <!-- ËºâÂÖ•ÁãÄÊÖãÔºöÈ°ØÁ§∫ loading spinner -->
    <div v-if="viewData.isLoading" class="flex items-center justify-center w-full h-full">
      <div class="text-center">
        <SkeletonLoader 
          size="lg" 
          :text="MESSAGES.board.loadingFromCloud"
          color="#3B82F6"
          :animate="true"
        />
      </div>
    </div>

    <!-- ËºâÂÖ•ÂÆåÊàêÔºöÈ°ØÁ§∫ÂØ¶ÈöõÁúãÊùøÂÖßÂÆπ -->
    <template v-else>
      <!-- üéØ Á∞°ÂåñÂæåÁßªÈô§ Debug Ë≥áË®ä -->
      <!-- üì± ÊâãÊ©üÁâàÂàóË°®ÂÆπÂô® - ÊîØÊè¥ÊãñÊõ≥ÈáçÊéíËàáÂΩàÊÄßÊªæÂãï -->
      <!-- üí° ÂçÅÊ≠≤Â∞èÊúãÂèãËß£ÈáãÔºöÈÄôÂÄãÂÆπÂô®ËÆì‰Ω†ÂèØ‰ª•„ÄåÊãñÊõ≥Êï¥ÂÄãÂàóË°®„ÄçÊèõ‰ΩçÁΩÆÔºÅ -->
      <draggable
        v-if="isListDragMode"
        class="flex overflow-x-auto scroll-smooth mobile-lists-container gap-2 p-1"
        :list="viewData.lists"
        @change="onListMove"
        tag="div"
        :disabled="false"
        :force-fallback="true"
        :fallback-on-body="true"
        :delay="300"
        :delay-on-touch-only="true"
        :touch-start-threshold="10"
        :animation="200"
        ghost-class="mobile-list-ghost"
        chosen-class="mobile-list-chosen"
        drag-class="mobile-list-drag"
        handle=".list-drag-handle"
      >
        <div v-for="list in viewData.lists" :key="list.id" class="mobile-list-wrapper">
          <!-- üéØ ÂàóË°®ÊãñÊõ≥ÊääÊâã - Èï∑ÊåâÈÄôË£°ÂèØ‰ª•ÊãñÂãïÊï¥ÂÄãÂàóË°® -->
          <div class="list-drag-handle bg-gray-300 hover:bg-gray-400 rounded-t-lg p-2 flex items-center justify-center cursor-move">
            <div class="flex items-center gap-2 text-gray-600">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path>
              </svg>
              <span class="text-xs font-medium">Èï∑ÊåâÊãñÂãïÂàóË°®</span>
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"></path>
              </svg>
            </div>
          </div>
          <ListItem
            :list="list"
            :dragging="draggingState.isDragging"
            :is-mobile="true"
            :is-dragging-disabled="isDraggingDisabled"
            :ai-generating-list-id="aiGeneratingListId"
            @card-move="onCardMove"
            @open-card-modal="openCardModal"
            @drag-start="onDragStart"
            @drag-end="onDragEnd"
            @card-delete="onCardDelete"
            @card-update-title="onCardUpdateTitle"
            @list-add-card="onListAddCard"
            @list-delete="onListDelete"
            @list-update-title="onListUpdateTitle"
            @ai-generate="onAiGenerate"
            class="mobile-list-item"
            style="width: calc(100vw - 2rem); max-width: 400px;"
          />
        </div>
      </draggable>
      
      <!-- ÂéüÊú¨ÁöÑÊªëÂãïÊ®°Âºè (È†êË®≠) -->
      <div 
        v-else
        class="flex overflow-x-auto scroll-smooth snap-x snap-mandatory mobile-lists-container gap-2 p-1" 
        ref="mobileListsContainer"
        style="scroll-snap-type: x mandatory;"
      >
        <ListItem
          v-for="list in viewData.lists" 
          :key="list.id"
          :list="list"
          :dragging="draggingState.isDragging"
          :is-mobile="true"
          :is-dragging-disabled="isDraggingDisabled"
          :ai-generating-list-id="aiGeneratingListId"
          @card-move="onCardMove"
          @open-card-modal="openCardModal"
          @drag-start="onDragStart"
          @drag-end="onDragEnd"
          @card-delete="onCardDelete"
          @card-update-title="onCardUpdateTitle"
          @list-add-card="onListAddCard"
          @list-delete="onListDelete"
          @list-update-title="onListUpdateTitle"
          @ai-generate="onAiGenerate"
          class="mobile-list-item snap-center"
          style="width: calc(100vw - 2rem); max-width: 400px;"
        />
      </div>
      
      <!-- üîÑ ÂàáÊèõÊãñÊõ≥Ê®°ÂºèÊåâÈàï -->
      <div class="fixed bottom-20 right-4 z-50">
        <button
          @click="toggleListDragMode"
          :class="[
            'px-4 py-2 rounded-full shadow-lg text-white transition-all duration-300',
            isListDragMode 
              ? 'bg-green-500 hover:bg-green-600' 
              : 'bg-blue-500 hover:bg-blue-600'
          ]"
        >
          <div class="flex items-center gap-2">
            <svg v-if="!isListDragMode" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"></path>
            </svg>
            <svg v-else class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
            </svg>
            <span class="text-sm font-medium">
              {{ isListDragMode ? 'ÊªëÂãïÊ®°Âºè' : 'ÊéíÂ∫èÊ®°Âºè' }}
            </span>
          </div>
        </button>
      </div>

      <!-- Êñ∞Â¢ûÂàóË°®ÂçÄÂüü - ÊâãÊ©üÁâàÂÖ®ÂØ¨Â∫¶ -->
      <div 
        class="mx-2 p-2 flex-shrink-0 mobile-add-list-item"
style="width: calc(100vw - 2rem); max-width: 420px;"
      >
        <!-- È°ØÁ§∫ÊåâÈàïÊ®°Âºè -->
        <Transition name="fade" mode="out-in">
          <div 
            v-if="!isAddingList"
            key="button"
            class="bg-gray-200 rounded flex items-start"
          >
            <button 
              class="w-full p-3 bg-transparent border-2 border-dashed border-gray-400 rounded text-gray-700 cursor-pointer text-sm transition-all duration-200 hover:bg-gray-300 hover:border-gray-500" 
              @click="startAddList"
            >
              + {{ MESSAGES.list.addNew }}
            </button>
          </div>
          
          <!-- È°ØÁ§∫ inline Á∑®ËºØÊ®°Âºè -->
          <div 
            v-else
            key="editor"
            class="bg-gray-200 rounded p-2"
          >
            <div class="bg-white rounded p-3">
              <input
                ref="newListInput"
                v-model="newListTitle"
                placeholder="Ëº∏ÂÖ•ÂàóË°®Ê®ôÈ°å..."
                class="w-full border-none outline-none text-sm font-bold mb-2"
                @keydown.enter="saveNewList"
                @keydown.escape="cancelAddList"
              />
              <div class="flex gap-2">
                <button
                  @click="saveNewList"
                  :disabled="!newListTitle.trim()"
                  class="px-3 py-1 bg-blue-500 text-white text-sm rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed"
                >
                  Êñ∞Â¢ûÂàóË°®
                </button>
                <button
                  @click="cancelAddList"
                  class="px-2 py-1 text-gray-600 text-sm rounded hover:bg-gray-100"
                >
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </Transition>
      </div>
    </template>

    <!-- Âç°ÁâáÁ∑®ËºØÊ®°ÊÖãÊ°Ü -->
    <CardModal 
      :show="showCardModal" 
      :card="selectedCard" 
      @close="closeCardModal" 
    />
    
    <!-- AI ÁîüÊàê‰ªªÂãôÊ®°ÊÖãÊ°Ü -->
    <AiTaskModal
      :show="showAiModal"
      :target-list-id="targetListId"
      @close="showAiModal = false"
      @generation-start="onAiGenerationStart"
      @generation-complete="onAiGenerationComplete"
    />
  </div>
</template>

<script setup lang="ts">
import { ref, nextTick, onMounted, onUnmounted, watch } from 'vue'
import ListItem from '@/components/ListItem.vue'
import CardModal from '@/components/CardModal.vue'
import AiTaskModal from '@/components/AiTaskModal.vue'
import SkeletonLoader from '@/components/SkeletonLoader.vue'
import { VueDraggableNext as draggable } from 'vue-draggable-next'
import { useListActions } from '@/composables/useListActions'
import { useBoardView } from '@/composables/useBoardView'
import { useCardActions } from '@/composables/useCardActions'
import { useGesture } from '@vueuse/gesture'
import type { CardUI } from '@/types'
import { MESSAGES } from '@/constants/messages'
import { eventBus } from '@/events/EventBus'

// ‰ΩøÁî®Áµ±‰∏ÄÁöÑÂç°ÁâáÂûãÂà•ÂÆöÁæ©
type Card = CardUI

// ÊãñÊãΩ‰∫ã‰ª∂ÂûãÂà•ÂÆöÁæ©
interface DragEvent {
  moved?: { element: Card }
  removed?: { element: Card }
}

interface DragItem {
  id: string
  [key: string]: unknown
}

// üì± ÊâãÊ©üÁâàÔºö‰ΩøÁî® composables
const { addList, deleteList: deleteListAction, updateListTitle: updateListTitleAction } = useListActions()
const { viewData, handleCardMove, handleListMove } = useBoardView()
const { deleteCard: deleteCardAction, updateCardTitle: updateCardTitleAction, addCard: addCardAction } = useCardActions()

// ÁúãÊùøÂÆπÂô®ÁöÑ DOM ÂºïÁî®
const boardContainerRef = ref<HTMLElement | null>(null)
const mobileListsContainer = ref<HTMLElement | null>(null)

// üéØ Á∞°ÂåñÊñπÊ°àÔºöÁßªÈô§Ë§áÈõúÁöÑÂ≠óÈ´îÁ∏ÆÊîæÂíåÁÄèË¶ΩÂô®ÂÅµÊ∏¨
// Êé•ÂèóÂêàÁêÜÈôêÂà∂ÔºåÊèê‰æõÁ©©ÂÆöÁöÑ‰ΩøÁî®ËÄÖÈ´îÈ©ó

// ÊãñÊãΩÁãÄÊÖãÁÆ°ÁêÜ
const draggingState = ref({
  isDragging: false,
  draggedItem: null as DragItem | null,
  dragType: null as 'card' | 'list' | null
})

// Ê®°ÊÖãÊ°ÜÁãÄÊÖãÁÆ°ÁêÜ
const showCardModal = ref(false)
const selectedCard = ref<Card | null>(null)

// Êñ∞Â¢ûÂàóË°®ÁãÄÊÖãÁÆ°ÁêÜ
const isAddingList = ref(false)
const newListTitle = ref('')
const newListInput = ref<HTMLInputElement | null>(null)
const isSavingList = ref(false)

// üîÑ ÂàóË°®ÊãñÊõ≥Ê®°ÂºèÁãÄÊÖã
// üí° ÂçÅÊ≠≤Â∞èÊúãÂèãËß£ÈáãÔºöÈÄôÂÄãÈñãÈóúÊ±∫ÂÆö‰Ω†ÊòØ„ÄåÊªëÂãïÁúãÂàóË°®„ÄçÈÇÑÊòØ„ÄåÊãñÂãïÊèõ‰ΩçÁΩÆ„Äç
const isListDragMode = ref(false)

// üîÑ ÂàáÊèõÂàóË°®ÊãñÊõ≥Ê®°Âºè
const toggleListDragMode = () => {
  isListDragMode.value = !isListDragMode.value
  console.log(`üì± [MOBILE] ÂàáÊèõÂà∞${isListDragMode.value ? 'ÊéíÂ∫è' : 'ÊªëÂãï'}Ê®°Âºè`)
}

// üéØ ËôïÁêÜÂàóË°®ÁßªÂãï‰∫ã‰ª∂
const onListMove = async (event: any) => {
  console.log('üì± [MOBILE-DRAG] ÂàóË°®ÁßªÂãï‰∫ã‰ª∂:', event)
  
  if (event.moved) {
    try {
      await handleListMove()
      console.log('‚úÖ [MOBILE-DRAG] ÂàóË°®È†ÜÂ∫èÊõ¥Êñ∞ÊàêÂäü')
    } catch (error) {
      console.error('‚ùå [MOBILE-DRAG] ÂàóË°®È†ÜÂ∫èÊõ¥Êñ∞Â§±Êïó:', error)
    }
  }
}

// üì± ÊâãÊ©üÁâàÈï∑Êåâ + ÊãñÊãΩÁ≥ªÁµ±
const longPressTimer = ref<number | null>(null)
const isLongPressing = ref(false)
const cardLongPressMode = ref(false)
const isDraggingDisabled = ref(true)  // ÊòØÂê¶Á¶ÅÁî®ÊãñÊãΩÔºàÈ†êË®≠Á¶ÅÁî®Ôºâ

// üìã ÊâãÊ©üÁâàÂàóË°®ÂàáÊèõÁ≥ªÁµ±
const isListSnapping = ref(false)

// üßπ Ê∏ÖÁêÜÂáΩÊï∏Â≠òÂÑ≤
const cleanupFunctions = ref<(() => void)[]>([])

// üéØ ÈÄ≤ÈöéÊâãÊ©üÊâãÂã¢ÂàùÂßãÂåñÔºàÊï¥ÂêàËá™ TrelloBoardÔºâ
const setupMobileGestures = () => {
  if (!mobileListsContainer.value) {
    console.error('‚ùå [MOBILE-BOARD] ÁÑ°Ê≥ïÂàùÂßãÂåñÔºömobileListsContainer ‰∏çÂ≠òÂú®')
    return
  }
  
  const container = mobileListsContainer.value
  console.log('üì± [MOBILE-BOARD] ÂàùÂßãÂåñÊâãÊ©üÁâàÊâãÂã¢Á≥ªÁµ±')
  
  // üéØ Âè™ËôïÁêÜÈùûÊãñÊãΩÂçÄÂüüÁöÑÂàóË°®ÂàáÊèõÊâãÂã¢
  let startX = 0
  let isListGesture = false
  
  const handleListTouchStart = (e: TouchEvent) => {
    const target = e.target as HTMLElement
    
    // Ê™¢Êü•ÊòØÂê¶Âú®Âç°ÁâáÊãñÊãΩÂçÄÂüü
    if (target.closest('.card-draggable') || 
        target.closest('draggable') || 
        target.closest('[draggable="true"]')) {
      return
    }
    
    const touch = e.touches[0]
    startX = touch.clientX
    isListGesture = false
  }
  
  const handleListTouchMove = (e: TouchEvent) => {
    if (!mobileListsContainer.value) return
    
    const target = e.target as HTMLElement
    
    if (target.closest('.card-draggable') || 
        target.closest('draggable') ||
        target.closest('[draggable="true"]')) {
      return
    }
    
    const touch = e.touches[0]
    const deltaX = touch.clientX - startX
    
    if (Math.abs(deltaX) > 15 && !isListGesture) {
      isListGesture = true
      e.preventDefault()
      console.log('üìã [MOBILE-GESTURE] ÂàóË°®ÂàáÊèõÊâãÂã¢Ëß∏Áôº')
    }
  }
  
  const handleListTouchEnd = () => {
    if (isListGesture && mobileListsContainer.value) {
      handleMobileListSnapBack()
    }
    isListGesture = false
  }
  
  // Á∂ÅÂÆö‰∫ã‰ª∂Áõ£ËÅΩÂô®
  container.addEventListener('touchstart', handleListTouchStart, { passive: true })
  container.addEventListener('touchmove', handleListTouchMove, { passive: false })
  container.addEventListener('touchend', handleListTouchEnd, { passive: true })
  
  // üßπ Â≠òÂÑ≤Ê∏ÖÁêÜÂáΩÊï∏ÔºåÈò≤Ê≠¢Ë®òÊÜ∂È´îÊ¥©Êºè
  cleanupFunctions.value.push(() => {
    if (container) {
      container.removeEventListener('touchstart', handleListTouchStart)
      container.removeEventListener('touchmove', handleListTouchMove)
      container.removeEventListener('touchend', handleListTouchEnd)
      console.log('üßπ [MOBILE-BOARD] ÊâãÊ©üÁâàÊâãÂã¢‰∫ã‰ª∂Áõ£ËÅΩÂô®Â∑≤Ê∏ÖÁêÜ')
    }
  })
  
  console.log('üì± [MOBILE-BOARD] ÊâãÂã¢Á≥ªÁµ±Â∑≤ÂàùÂßãÂåñ')
}

// üéØ ÊâãÊ©üÁâàÂàóË°®Êô∫ÊÖßÂ∞çÈΩä - ÊªëÂãïÂæåËá™ÂãïÂ∞çÈΩäÂà∞ÊúÄËøëÁöÑÂàóË°®‰∏≠ÂøÉ
const handleMobileListSnapBack = () => {
  if (!mobileListsContainer.value || isListSnapping.value) return
  
  isListSnapping.value = true
  const container = mobileListsContainer.value
  
  // ÂèñÂæóÁ¨¨‰∏ÄÂÄãÂàóË°®ÂÖÉÁ¥†Ë®àÁÆóÂØ¨Â∫¶
  const firstList = container.querySelector('.mobile-list-item') as HTMLElement
  const listWidth = firstList ? firstList.offsetWidth + 16 : 320
  
  // Ë®àÁÆóÊªæÂãï‰ΩçÁΩÆ
  
  // ÊâæÂá∫ÊúÄÊé•ËøëËû¢Âπï‰∏≠ÂøÉÁöÑÂàóË°®
  const currentScroll = container.scrollLeft
  const containerWidth = container.clientWidth
  const screenCenter = currentScroll + containerWidth / 2
  
  let closestListIndex = 0
  let minDistance = Infinity
  
  viewData.value.lists.forEach((_, index) => {
    const listCenterX = index * listWidth + listWidth / 2
    const distance = Math.abs(listCenterX - screenCenter)
    if (distance < minDistance) {
      minDistance = distance
      closestListIndex = index
    }
  })
  
  // Ë®àÁÆóÁõÆÊ®ôÊªæÂãï‰ΩçÁΩÆ
  const targetScroll = closestListIndex * listWidth + (listWidth - containerWidth) / 2
  
  // ÊªæÂãïÂà∞ÁõÆÊ®ô‰ΩçÁΩÆ
  container.scrollTo({
    left: targetScroll,
    behavior: 'smooth'
  })
  
  // ÈúáÂãïÂõûÈ•ã
  if (Math.abs(targetScroll - currentScroll) > 10 && navigator.vibrate) {
    navigator.vibrate(30)
  }
  
  // ÈáçË®≠ÂΩàÊÄßÁãÄÊÖã
  setTimeout(() => {
    isListSnapping.value = false
  }, 500)
}

// üéØ ‰ΩøÁî® @vueuse/gesture ËôïÁêÜÈï∑ÊåâÊâãÂã¢
const setupAdvancedGestures = () => {
  if (!boardContainerRef.value) {
    console.error('‚ùå [MOBILE-BOARD] ÁÑ°Ê≥ïÂàùÂßãÂåñÊâãÂã¢ÔºöÂÆπÂô®‰∏çÂ≠òÂú®')
    return
  }
  
  console.log('üì± [MOBILE-BOARD] ÂàùÂßãÂåñÈÄ≤ÈöéÊâãÂã¢Á≥ªÁµ±')
  
  // üö´ Á¶ÅÁî®Âè≥ÈçµÈÅ∏ÂñÆÔºåÈò≤Ê≠¢Èï∑ÊåâÊôÇÂá∫Áèæ context menu
  const handleContextMenu = (e: Event) => {
    e.preventDefault()
    return false
  }
  
  boardContainerRef.value.addEventListener('contextmenu', handleContextMenu, { passive: false })
  
  // Â≠òÂÑ≤Ê∏ÖÁêÜÂáΩÊï∏‰ª•‰æøÁµÑ‰ª∂Âç∏ËºâÊôÇ‰ΩøÁî®
  cleanupFunctions.value.push(() => {
    boardContainerRef.value?.removeEventListener('contextmenu', handleContextMenu)
  })
  
  useGesture({
    onDragStart: () => {
      console.log('üîã [MOBILE-GESTURE] ÈñãÂßãËß∏Êéß')
      isLongPressing.value = false
      cardLongPressMode.value = false
      isDraggingDisabled.value = true
      
      // Ë®≠ÂÆö 0.75 ÁßíË®àÊôÇÂô®
      longPressTimer.value = window.setTimeout(() => {
        console.log('‚è∞ [MOBILE-GESTURE] Èï∑Êåâ 0.75 ÁßíÈÅîÊàêÔºÅÈÄ≤ÂÖ•Âç°ÁâáÊãñÊãΩÊ®°Âºè')
        isLongPressing.value = true
        cardLongPressMode.value = true
        isDraggingDisabled.value = false  // ÂïüÁî®ÊãñÊãΩ
        
        // ÈúáÂãïÂõûÈ•ã
        if (navigator.vibrate) {
          navigator.vibrate(50)
        }
      }, 750)
    },
    
    onDrag: ({ movement, velocity }) => {
      const [mx, my] = movement as [number, number]
      const vx = (Array.isArray(velocity) ? velocity[0] : 0) ?? 0
      
      // Âç°ÁâáÊãñÊãΩÊ®°Âºè
      if (cardLongPressMode.value) {
        console.log('üì¶ [MOBILE-GESTURE] Âç°ÁâáÊãñÊãΩÊ®°Âºè:', { mx, my })
        return
      }
      
      // ÂàóË°®ÂàáÊèõÊ®°Âºè
      if (Math.abs(mx) > Math.abs(my) && Math.abs(mx) > 30) {
        console.log('üìã [MOBILE-GESTURE] ÂàóË°®Ê∞¥Âπ≥ÂàáÊèõ:', { mx, vx })
        // ÂàóË°®ÊªëÂãïÁî± setupMobileGestures ËôïÁêÜ
      }
    },
    
    onDragEnd: ({ movement }) => {
      const [mx] = movement as [number, number]
      console.log('üèÅ [MOBILE-GESTURE] Ëß∏ÊéßÁµêÊùü')
      
      // Ê∏ÖÈô§Ë®àÊôÇÂô®
      if (longPressTimer.value) {
        clearTimeout(longPressTimer.value)
        longPressTimer.value = null
      }
      
      // ËôïÁêÜÂàóË°®ÂΩàÊÄßÊªæÂãï
      if (!cardLongPressMode.value && Math.abs(mx) > 50) {
        handleMobileListSnapBack()
      }
      
      // ÈáçË®≠ÁãÄÊÖã
      isLongPressing.value = false
      cardLongPressMode.value = false
      isDraggingDisabled.value = true
    }
  }, {
    domTarget: boardContainerRef,
    drag: {
      threshold: 5
    }
  })
}

// ÊãñÊãΩ‰∫ã‰ª∂ËôïÁêÜ
const onDragStart = (item: DragItem, type: 'card' | 'list') => {
  console.log('üì± [MOBILE-BOARD] ÊãñÊãΩÈñãÂßã:', { item, type })
  draggingState.value.isDragging = true
  draggingState.value.draggedItem = item
  draggingState.value.dragType = type
}

const onDragEnd = () => {
  console.log('üì± [MOBILE-BOARD] ÊãñÊãΩÁµêÊùü')
  draggingState.value.isDragging = false
  draggingState.value.draggedItem = null
  draggingState.value.dragType = null
}

// ËôïÁêÜÂç°ÁâáÊãñÊãΩÁßªÂãï‰∫ã‰ª∂
const onCardMove = async (event: DragEvent) => {
  console.log('üì± [MOBILE-BOARD] Card move event:', event)
  
  if (event.moved) {
    const { element: card } = event.moved
    let currentListId = null
    for (const list of viewData.value.lists) {
      if (list.cards.find(c => c.id === card.id)) {
        currentListId = list.id
        break
      }
    }
    
    if (currentListId) {
      await handleCardMove([currentListId])
      console.log('‚úÖ [MOBILE-BOARD] ÂêåÂàóË°®ÁßªÂãïËôïÁêÜÂÆåÊàê')
    }
  }
  
  if (event.removed) {
    const { element: card } = event.removed
    let targetListId = null
    for (const list of viewData.value.lists) {
      if (list.cards.find(c => c.id === card.id)) {
        targetListId = list.id
        break
      }
    }
    
    if (targetListId) {
      await handleCardMove([targetListId])
      console.log('‚úÖ [MOBILE-BOARD] Ë∑®ÂàóË°®ÁßªÂãïËôïÁêÜÂÆåÊàê')
    }
  }
}

// üéØ Ê®ÇËßÄÊõ¥Êñ∞Á≥ªÁµ± - Á´ãÂç≥Êõ¥Êñ∞ UIÔºåÂ§±ÊïóÊôÇÂõûÊªæ

// üóëÔ∏è Âç°ÁâáÂà™Èô§ - ÈúÄË¶ÅÁ¢∫Ë™çÁöÑÈáçË¶ÅÊìç‰Ωú
const onCardDelete = async (card: Card) => {
  console.log('üóëÔ∏è [MOBILE-BOARD] Âà™Èô§Âç°Áâá:', card.title)
  
  try {
    // ÈÄôÂÄãÊìç‰ΩúÁî®Êà∂ÈúÄË¶ÅÁü•ÈÅìÊòØÂê¶ÊàêÂäüÔºåÊâÄ‰ª•Á≠âÂæÖÁµêÊûú
    await deleteCardAction(card)
    console.log('‚úÖ [MOBILE-BOARD] Âç°ÁâáÂà™Èô§ÊàêÂäü')
    // ÂèØ‰ª•È°ØÁ§∫ÊàêÂäüÊèêÁ§∫ÔºàÂèØÈÅ∏Ôºâ
  } catch (error) {
    console.error('‚ùå [MOBILE-BOARD] Âç°ÁâáÂà™Èô§Â§±Êïó:', error)
    eventBus.emit('notification:error', {
      title: 'Âà™Èô§Â§±Êïó',
      message: 'Âà™Èô§Â§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶',
      duration: 5000
    })
  }
}

// ‚úèÔ∏è Âç°ÁâáÊ®ôÈ°åÊõ¥Êñ∞ - Ê®ÇËßÄÊõ¥Êñ∞Á≠ñÁï•  
const onCardUpdateTitle = async (cardId: string, newTitle: string) => {
  console.log('‚úèÔ∏è [MOBILE-BOARD] Êõ¥Êñ∞Âç°ÁâáÊ®ôÈ°å:', { cardId, newTitle })
  
  // üöÄ Ê®ÇËßÄÊõ¥Êñ∞Ôºö‰∏çÁ≠âÂæÖÔºåËÆìÁî®Êà∂ÊÑüË¶∫Ë∂ÖÂø´
  // Store ÂÖßÈÉ®Â∑≤Á∂ìÂØ¶Áèæ‰∫ÜÊ®ÇËßÄÊõ¥Êñ∞ + Â§±ÊïóÂõûÊªæ
  updateCardTitleAction(cardId, newTitle).catch(error => {
    console.error('‚ùå [MOBILE-BOARD] Âç°ÁâáÊ®ôÈ°åÊõ¥Êñ∞Â§±Êïó:', error)
    // ÈåØË™§Â∑≤Âú® Store Â±§ËôïÁêÜÂõûÊªæÔºåÈÄôË£°Âè™ÈúÄË¶ÅË®òÈåÑ
  })
  
  console.log('‚ö° [MOBILE-BOARD] Âç°ÁâáÊ®ôÈ°åÊ®ÇËßÄÊõ¥Êñ∞ÂÆåÊàê')
}

// üìå Êñ∞Â¢ûÂç°Áâá - Ê®ÇËßÄÊõ¥Êñ∞ + ÈåØË™§ËôïÁêÜ
const onListAddCard = async (listId: string, title: string) => {
  console.log('üìå [MOBILE-BOARD] Êñ∞Â¢ûÂç°Áâá:', { listId, title })
  
  try {
    // üöÄ Store Â∑≤ÂØ¶ÁèæÊ®ÇËßÄÊõ¥Êñ∞ÔºåÊàëÂÄëÂè™ÈúÄË¶ÅËôïÁêÜÈåØË™§
    await addCardAction(listId, title, 'medium')
    console.log('‚úÖ [MOBILE-BOARD] Âç°ÁâáÊñ∞Â¢ûÂÆåÊàê')
  } catch (error) {
    console.error('‚ùå [MOBILE-BOARD] Êñ∞Â¢ûÂç°ÁâáÂ§±Êïó:', error)
    // Store Â∑≤Á∂ìÂõûÊªæ‰∫ÜÔºåÊàëÂÄëÊèê‰æõÁî®Êà∂ÂèãÂ•ΩÁöÑÈåØË™§Ë®äÊÅØ
    eventBus.emit('notification:error', {
      title: 'Êñ∞Â¢ûÂ§±Êïó',
      message: 'Êñ∞Â¢ûÂç°ÁâáÂ§±ÊïóÔºåË´ãÊ™¢Êü•Á∂≤Ë∑ØÈÄ£Á∑öÂæåÂÜçË©¶',
      duration: 5000
    })
  }
}

// ü§ñ AI ÁîüÊàê‰ªªÂãô - ÈñãÂïü AiTaskModal
const showAiModal = ref(false)
const targetListId = ref<string | null>(null)
const aiGeneratingListId = ref<string | null>(null)

const onAiGenerate = (listId: string) => {
  console.log('ü§ñ [MOBILE-BOARD] ÈñãÂïü AI ÁîüÊàêÊ®°ÊÖãÊ°ÜÔºåÁõÆÊ®ôÂàóË°®:', listId)
  targetListId.value = listId
  showAiModal.value = true
}

// üåà ËôïÁêÜ AI ÁîüÊàêÈñãÂßã‰∫ã‰ª∂
const onAiGenerationStart = (listId: string) => {
  console.log('üåà [MOBILE-BOARD] AI ÈñãÂßãÁîüÊàêÔºåÂàóË°®:', listId)
  aiGeneratingListId.value = listId
}

// üåà ËôïÁêÜ AI ÁîüÊàêÂÆåÊàê‰∫ã‰ª∂
const onAiGenerationComplete = () => {
  console.log('‚úÖ [MOBILE-BOARD] AI ÁîüÊàêÂÆåÊàêÔºåÊ∏ÖÈô§ÁãÄÊÖã')
  aiGeneratingListId.value = null
}

// üóëÔ∏è ÂàóË°®Âà™Èô§ - ÈúÄË¶ÅÁ¢∫Ë™çÁöÑÈáçË¶ÅÊìç‰Ωú
const onListDelete = async (listId: string) => {
  console.log('üóëÔ∏è [MOBILE-BOARD] Âà™Èô§ÂàóË°®:', listId)
  
  try {
    // Âà™Èô§Êìç‰ΩúÁî®Êà∂ÈúÄË¶ÅÊòéÁ¢∫ÁöÑÁµêÊûúÂèçÈ•ã
    await deleteListAction(listId)
    console.log('‚úÖ [MOBILE-BOARD] ÂàóË°®Âà™Èô§ÊàêÂäü')
    // ÂèØ‰ª•È°ØÁ§∫ÊàêÂäüÊèêÁ§∫
  } catch (error) {
    console.error('‚ùå [MOBILE-BOARD] ÂàóË°®Âà™Èô§Â§±Êïó:', error)
    eventBus.emit('notification:error', {
      title: 'Âà™Èô§Â§±Êïó',
      message: 'Âà™Èô§Â§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶',
      duration: 5000
    })
  }
}

// ‚úèÔ∏è ÂàóË°®Ê®ôÈ°åÊõ¥Êñ∞ - Ê®ÇËßÄÊõ¥Êñ∞Á≠ñÁï•
const onListUpdateTitle = async (listId: string, newTitle: string) => {
  console.log('‚úèÔ∏è [MOBILE-BOARD] Êõ¥Êñ∞ÂàóË°®Ê®ôÈ°å:', { listId, newTitle })
  
  // üöÄ Ê®ÇËßÄÊõ¥Êñ∞Ôºö‰∏çÁ≠âÂæÖÔºåËÆìÁî®Êà∂ÊÑüË¶∫Ë∂ÖÂø´
  // Store ÂÖßÈÉ®Â∑≤Á∂ìÂØ¶Áèæ‰∫ÜÊ®ÇËßÄÊõ¥Êñ∞ + Â§±ÊïóÂõûÊªæ
  updateListTitleAction(listId, newTitle).catch(error => {
    console.error('‚ùå [MOBILE-BOARD] ÂàóË°®Ê®ôÈ°åÊõ¥Êñ∞Â§±Êïó:', error)
    // ÈåØË™§Â∑≤Âú® Store Â±§ËôïÁêÜÂõûÊªæÔºåÈÄôË£°Âè™ÈúÄË¶ÅË®òÈåÑ
  })
  
  console.log('‚ö° [MOBILE-BOARD] ÂàóË°®Ê®ôÈ°åÊ®ÇËßÄÊõ¥Êñ∞ÂÆåÊàê')
}

// Êñ∞Â¢ûÂàóË°®ÂäüËÉΩ
const startAddList = async () => {
  isAddingList.value = true
  newListTitle.value = ''
  
  await nextTick()
  if (newListInput.value) {
    newListInput.value.focus()
  }
}

const saveNewList = async () => {
  if (isSavingList.value) return
  
  const titleToSave = newListTitle.value.trim()
  if (!titleToSave) return
  
  isSavingList.value = true
  
  try {
    await addList(titleToSave)
    isAddingList.value = false
    newListTitle.value = ''
    console.log(`‚úÖ [MOBILE-BOARD] ÊàêÂäüÂâµÂª∫ÂàóË°®: ${titleToSave}`)
  } catch (error) {
    console.error('‚ùå [MOBILE-BOARD] ÂâµÂª∫ÂàóË°®Â§±Êïó:', error)
  } finally {
    isSavingList.value = false
  }
}

const cancelAddList = () => {
  isAddingList.value = false
  newListTitle.value = ''
}

// Âç°ÁâáÊ®°ÊÖãÊ°Ü
const openCardModal = (card: Card) => {
  selectedCard.value = card
  showCardModal.value = true
}

const closeCardModal = () => {
  showCardModal.value = false
  selectedCard.value = null
}

// ÂàùÂßãÂåñ - Âè™ËôïÁêÜÂü∫Êú¨ÊâãÂã¢ÔºåÈÅøÂÖçÈáçË§áÂàùÂßãÂåñÂàóË°®ÊâãÂã¢
onMounted(async () => {
  console.log('üì± [MOBILE-BOARD] ÁµÑ‰ª∂ÂàùÂßãÂåñ')
  
  // üö´ ‰∏çÈáçË§áËºâÂÖ•Ë≥áÊñôÔºåÁî±‰∏äÂ±§ TrelloBoard Ë≤†Ë≤¨
  
  // üéØ Á∞°ÂåñÂàùÂßãÂåñÔºöÁßªÈô§Â≠óÈ´îÂÅµÊ∏¨
  
  // üéØ Âè™ÂàùÂßãÂåñÂü∫Êú¨ÊâãÂã¢Á≥ªÁµ±ÔºàÈï∑Êåâ„ÄÅcontextmenu Á≠âÔºâ
  // ÂàóË°®ÊâãÂã¢Áî± watcher Ë≤†Ë≤¨ÔºåÈÅøÂÖçÈáçË§áÂàùÂßãÂåñ
  setupAdvancedGestures()
  console.log('üì± [MOBILE-BOARD] Âü∫Êú¨ÊâãÂã¢Á≥ªÁµ±Â∑≤ÂàùÂßãÂåñÔºåÁ≠âÂæÖÂàóË°®Êï∏ÊìöËºâÂÖ•...')
})

// üéØ Áõ£ËÅΩË≥áÊñôËºâÂÖ•ÂÆåÊàêÂæåÂàùÂßãÂåñÂàóË°®ÊâãÂã¢
// 
// üìã ÁÇ∫‰ªÄÈ∫º‰∏çÁî® immediate: trueÔºü
// - immediate ÂèØËÉΩÂú® DOM Êú™Â∞±Á∑íÊôÇÂü∑Ë°åÔºåÂ∞éËá¥ mobileListsContainer.value ÁÇ∫ null
// - ÊàëÂÄëÈúÄË¶ÅÁ¢∫‰øùÂÆπÂô®ÂÖÉÁ¥†Â∑≤Á∂ìÂ≠òÂú®ÊâçËÉΩÁ∂ÅÂÆö‰∫ã‰ª∂Áõ£ËÅΩÂô®
//
// üîí ÈõôÈáçÊ™¢Êü•Á¢∫‰øùÂÆâÂÖ®Ôºö
// - newLength > 0ÔºöÁ¢∫‰øùÊúâÂàóË°®Êï∏Êìö
// - mobileListsContainer.valueÔºöÁ¢∫‰øù DOM ÂÆπÂô®Â∑≤Â∞±Á∑í
// - nextTickÔºöÁ¢∫‰øù Vue ÁöÑ DOM Êõ¥Êñ∞ÂÆåÊàê
watch(() => viewData.value.lists.length, (newLength) => {
  if (newLength > 0 && mobileListsContainer.value) {
    nextTick(() => {
      setupMobileGestures()
    })
  }
})

// üßπ ÁµÑ‰ª∂Âç∏ËºâÊôÇÊ∏ÖÁêÜ‰∫ã‰ª∂Áõ£ËÅΩÂô®
onUnmounted(() => {
  console.log('üì± [MOBILE-BOARD] ÁµÑ‰ª∂Âç∏ËºâÔºåÊ∏ÖÁêÜ‰∫ã‰ª∂Áõ£ËÅΩÂô®')
  cleanupFunctions.value.forEach(cleanup => cleanup())
  cleanupFunctions.value = []
})
</script>

<style scoped>
/* üì± ÊâãÊ©üÁâàÂàóË°®ÊãñÊõ≥Ê®£Âºè */
/* üí° ÂçÅÊ≠≤Â∞èÊúãÂèãËß£ÈáãÔºöÈÄô‰∫õÊòØÂàóË°®ÊãñÊõ≥ÊôÇÁöÑÈ≠îÊ≥ïÊïàÊûúÔºÅ */

/* üé≠ Ê≠£Âú®Ë¢´ÊãñÊõ≥ÁöÑÂàóË°® */
.mobile-list-drag {
  opacity: 0.8;
  transform: scale(0.95);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

/* üëª ÂàóË°®ÁöÑÂπΩÈùà‰ΩçÁΩÆ */  
.mobile-list-ghost {
  opacity: 0.3;
  background: #e5e7eb;
  border: 2px dashed #9ca3af;
}

/* ‚ú® Ë¢´ÈÅ∏‰∏≠ÁöÑÂàóË°® */
.mobile-list-chosen {
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  transform: scale(1.02);
}

/* üéØ ÊãñÊõ≥ÊääÊâãÊ®£Âºè */
.list-drag-handle {
  touch-action: none; /* Èò≤Ê≠¢ÁÄèË¶ΩÂô®ËôïÁêÜËß∏Êéß */
  user-select: none; /* Èò≤Ê≠¢ÈÅ∏ÂèñÊñáÂ≠ó */
}

/* üì± ÂàóË°®ÂåÖË£ùÂô® */
.mobile-list-wrapper {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
}
</style>

<style scoped>
/* Êñ∞Â¢ûÂàóË°®ÈÅéÊ∏°ÂãïÁï´ */
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.15s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* Èò≤Ê≠¢ÊãñÊãΩÊôÇÈÅ∏ÂèñÊñáÂ≠ó - Â∑≤Âú®Ê®°Êùø‰∏≠ËôïÁêÜ */

/* üì± ÊâãÊ©üÁâàÂÆπÂô®Ê®£Âºè */
.mobile-container {
  touch-action: pan-x pan-y;
  -webkit-overflow-scrolling: touch;
  /* üö´ Èò≤Ê≠¢Èï∑ÊåâÊôÇÂá∫ÁèæÂè≥ÈçµÈÅ∏ÂñÆÂíåÈÅ∏ÂèñÊñáÂ≠ó */
  -webkit-touch-callout: none; /* iOS Safari Èò≤Ê≠¢Èï∑ÊåâÂΩàÂá∫ÈÅ∏ÂñÆ */
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.mobile-list-item {
  /* üéØ Á∞°Âåñ CSS ÂØ¨Â∫¶Ë®àÁÆóÔºåÊîØÊè¥Âà∞„ÄåÂ§ß‰∏ÄÁ¥ö„ÄçÂ≠óÈ´î */
  width: calc(100vw - 2rem);
  min-width: 280px; /* Á¢∫‰øùÂ∞èËû¢ÂπïÂèØËÆÄÊÄß */
  max-width: 380px; /* ÈôêÂà∂ÊúÄÂ§ßÂØ¨Â∫¶ÔºåÊîØÊè¥Âà∞„ÄåÂ§ß‰∏ÄÁ¥ö„ÄçÂ≠óÈ´î */
  flex-shrink: 0;
  scroll-snap-align: center;
  box-sizing: border-box;
}

/* üéØ ‰ΩøÁî®ËÄÖÂèãÂñÑÊèêÁ§∫ÔºöÂª∫Ë≠∞‰ΩøÁî®„ÄåÊ®ôÊ∫ñ„ÄçÊàñ„ÄåÂ§ß‰∏ÄÁ¥ö„ÄçÂ≠óÈ´îÂ§ßÂ∞è‰ª•Áç≤ÂæóÊúÄ‰Ω≥È´îÈ©ó */

/* üì± ÊâãÊ©üÁâàÂç°ÁâáÊãñÊãΩÊ®£Âºè - Á∞°ÂåñÁâà */

/* üéØ ÊâãÊ©üÁâàÊãñÊãΩÈ°ûÂà•Ê®£Âºè - Â∞çÊáâ ListItem Ë®≠ÂÆöÁöÑ mobile-drag */
:deep(.mobile-drag) {
  transform: scale(1.1) rotate(-3deg) !important;
  box-shadow: 0 20px 50px rgba(59, 130, 246, 0.4) !important;
  opacity: 0.75 !important;
  z-index: 10000 !important;
  border: 3px solid #3b82f6 !important;
  background: linear-gradient(135deg, #ffffff, #dbeafe) !important;
  transition: none !important;
  cursor: grabbing !important;
  pointer-events: none !important;
  position: fixed !important; /* üîë ÈóúÈçµÔºöÂõ∫ÂÆöÂÆö‰ΩçË∑üÈö®ÊâãÊåá */
}

/* üîß ÊâãÊ©üÁâà Fallback Ê®£Âºè - Áï∂‰ΩøÁî® force-fallback ÊôÇÔºàË∑üÊ°åÈù¢Áâà‰∏ÄÊ®£Ôºâ */
:deep(.sortable-fallback) {
  transform: scale(1.1) rotate(-3deg) !important;
  box-shadow: 0 20px 50px rgba(59, 130, 246, 0.4) !important;
  opacity: 0.8 !important; /* Ë∑üÊ°åÈù¢Áâà‰∏ÄÊ®£ */
  z-index: 99999 !important;
  border: 3px solid #3b82f6 !important;
  background: linear-gradient(135deg, #ffffff, #dbeafe) !important;
  transition: none !important;
  cursor: grabbing !important;
  pointer-events: none !important;
  position: fixed !important; /* üîë ÈóúÈçµÔºöÂõ∫ÂÆöÂÆö‰ΩçË∑üÈö®ÊâãÊåá */
}

:deep(.mobile-ghost) {
  background: linear-gradient(135deg, #dcfce7, #bbf7d0) !important;
  border: 2px dashed #22c55e !important;
  opacity: 0.6 !important;
  transform: scale(0.95) !important;
  transition: all 0.2s ease !important;
}

/* üì± ÊâãÊ©üÁâàÊ®£ÂºèÂ∑≤Êï¥ÂêàÂà∞ ListItem.vueÔºåÁßªÈô§ÈáçË§áÂÆöÁæ© */

/* ÈüøÊáâÂºèÈñìË∑ù */
@media (max-width: 768px) {
  .mobile-container {
    padding: 1rem;
    gap: 1.5rem;
  }
}
</style>