<!--
  ğŸƒ Card çµ„ä»¶ - å–®å¼µå¡ç‰‡æ¸²æŸ“çµ„ä»¶
  
  ======================== åŠŸèƒ½å®šä½ ========================
  
  ğŸ¯ é€™å€‹çµ„ä»¶è² è²¬ä»€éº¼ï¼Ÿ
  âœ… æ¸²æŸ“ã€Œå–®å¼µå¡ç‰‡ã€çš„å¤–è§€å’ŒåŸºæœ¬äº¤äº’
  âœ… è™•ç†å¡ç‰‡çš„å‹¾é¸ç‹€æ…‹ï¼ˆcheckboxï¼‰
  âœ… é¡¯ç¤ºå¡ç‰‡æ¨™é¡Œã€æè¿°åœ–ç¤ºã€åˆ°æœŸæ—¥ç­‰è³‡è¨Š
  âœ… æä¾›å¡ç‰‡çš„é»æ“Šã€åˆªé™¤ç­‰åŸºæœ¬æ“ä½œ
  âŒ ä¸è² è²¬æ‹–æ‹½é‚è¼¯ï¼ˆç”± ListItem çš„ draggable è™•ç†ï¼‰
  âŒ ä¸è² è²¬è³‡æ–™æ›´æ–°ï¼ˆåªç™¼é€äº‹ä»¶çµ¦çˆ¶çµ„ä»¶ï¼‰
  
  ======================== èˆ‡ ListItem çš„å·®åˆ¥ ========================
  
  ğŸ“‹ ListItem.vueï¼ˆåˆ—è¡¨çµ„ä»¶ï¼‰ï¼š
  - è² è²¬ã€Œæ•´å€‹åˆ—è¡¨ã€çš„ç®¡ç†
  - åŒ…å«å¤šå¼µå¡ç‰‡
  - è™•ç†æ‹–æ‹½æ’åºé‚è¼¯ï¼ˆé€é vue-draggable-nextï¼‰
  - ç®¡ç†åˆ—è¡¨æ¨™é¡Œã€æ–°å¢å¡ç‰‡ç­‰åˆ—è¡¨å±¤ç´šåŠŸèƒ½
  - æ¶æ§‹ï¼šåˆ—è¡¨å®¹å™¨ > draggable > å¤šå€‹ Card çµ„ä»¶
  
  ğŸƒ Card.vueï¼ˆå¡ç‰‡çµ„ä»¶ï¼‰ï¼š
  - åªè² è²¬ã€Œå–®å¼µå¡ç‰‡ã€çš„é¡¯ç¤º
  - è¢« ListItem ä½¿ç”¨çš„å­çµ„ä»¶
  - ç´”æ¸²æŸ“çµ„ä»¶ï¼Œä¸è™•ç†è¤‡é›œé‚è¼¯
  - é€éäº‹ä»¶å‘ä¸Šå‚³éç”¨æˆ¶æ“ä½œ
  - æ¶æ§‹ï¼šå–®ä¸€å¡ç‰‡çš„ UI å…ƒç´ 
  
  ======================== åæ­²å°æœ‹å‹è§£é‡‹ ========================
  
  ğŸ  æƒ³åƒä¸€å€‹æ›¸æ¶ï¼ˆListItemï¼‰ï¼š
  - æ›¸æ¶å¯ä»¥æ”¾å¾ˆå¤šæœ¬æ›¸
  - æ›¸æ¶æœ‰æ¨™é¡Œï¼ˆä¾‹å¦‚ï¼šã€Œç§‘å­¸é¡ã€ï¼‰
  - ä½ å¯ä»¥åœ¨æ›¸æ¶é–“æ¬å‹•æ›¸æœ¬
  - æ›¸æ¶åº•éƒ¨æœ‰ã€ŒåŠ æ–°æ›¸ã€çš„æŒ‰éˆ•
  
  ğŸ“š æ¯æœ¬æ›¸ï¼ˆCardï¼‰ï¼š
  - é¡¯ç¤ºæ›¸å
  - å¯ä»¥æ‰“å‹¾æ¨™è¨˜ã€Œå·²è®€ã€
  - é»æ“Šå¯ä»¥çœ‹è©³ç´°å…§å®¹
  - å¯ä»¥åˆªé™¤é€™æœ¬æ›¸
  
  ListItem = æ›¸æ¶ï¼ˆç®¡ç†æ‰€æœ‰æ›¸ï¼‰
  Card = å–®æœ¬æ›¸ï¼ˆåªç®¡è‡ªå·±çš„é¡¯ç¤ºï¼‰
  
  ======================== Props æ¥æ”¶ ========================
  - card: å¡ç‰‡è³‡æ–™ç‰©ä»¶
  - dragging: æ˜¯å¦æ­£åœ¨æ‹–æ‹½ä¸­
  - isMobile: æ˜¯å¦ç‚ºæ‰‹æ©Ÿç‰ˆ
  
  ======================== Events ç™¼é€ ========================
  - open-modal: é–‹å•Ÿå¡ç‰‡è©³ç´°ç·¨è¼¯
  - delete: åˆªé™¤å¡ç‰‡
  - update-title: æ›´æ–°å¡ç‰‡æ¨™é¡Œï¼ˆinline ç·¨è¼¯ï¼‰
  - updateStatus: æ›´æ–°å¡ç‰‡ç‹€æ…‹ï¼ˆTodo/Doing/Doneï¼‰
  - updatePriority: æ›´æ–°å¡ç‰‡å„ªå…ˆé †åºï¼ˆHigh/Medium/Lowï¼‰
  
  ======================== ä½¿ç”¨ç¯„ä¾‹ ========================
  åœ¨ ListItem.vue ä¸­è¢«é€™æ¨£ä½¿ç”¨ï¼š
  <Card 
    :card="card" 
    :dragging="dragging"
    :is-mobile="isMobile"
    @open-modal="$emit('open-card-modal', card)"
    @delete="$emit('card-delete', card)"
    @updateStatus="handleCardStatusUpdate"
    @updatePriority="handleCardPriorityUpdate"
  />

  ======================== ğŸ“± è·¨è£ç½®é¡¯ç¤ºå•é¡Œè§£æ±º ========================
  
  ğŸ§’ åæ­²å°æœ‹å‹è§£é‡‹ï¼šç‚ºä»€éº¼åŒæ¨£çš„å¡ç‰‡åœ¨ä¸åŒæ‰‹æ©Ÿä¸Šçœ‹èµ·ä¾†ä¸ä¸€æ¨£ï¼Ÿ
  
  ğŸ¨ æƒ³åƒä½ åœ¨ä¸åŒçš„ç´™ä¸Šç•«åŒä¸€å¼µåœ–ï¼š
  - æœ‰äº›ç´™æ¯”è¼ƒåšï¼Œå­—æœƒçœ‹èµ·ä¾†ç²—ä¸€é»ï¼ˆä¸åŒæ‰‹æ©Ÿçš„è¢å¹•å¯†åº¦ï¼‰
  - æœ‰äº›ç­†å¯«å‡ºä¾†çš„å­—æ¯”è¼ƒå¤§ï¼ˆä¸åŒæ‰‹æ©Ÿçš„é è¨­å­—é«”ï¼‰
  - æœ‰äº›ç´™æ¯”è¼ƒå°ï¼Œåœ–å¯èƒ½æœƒæ“ åœ¨ä¸€èµ·ï¼ˆä¸åŒè¢å¹•å°ºå¯¸ï¼‰
  
  ğŸ’¡ è§£æ±ºæ–¹æ³•å°±åƒæº–å‚™ä¸€å€‹ã€Œè¬èƒ½å·¥å…·ç®±ã€ï¼š
  - ğŸ”§ max-w-full: å‘Šè¨´å¡ç‰‡ã€Œä¸å¯ä»¥æ¯”å®¹å™¨é‚„å¯¬ã€ï¼ˆåƒçµ¦åœ–ç‰‡è¨­é‚Šç•Œï¼‰
  - ğŸ“ break-words: å¦‚æœæ–‡å­—å¤ªé•·ï¼Œå°±è‡ªå‹•æ›è¡Œï¼ˆåƒå¯«å­—å¯«åˆ°é‚Šç·£å°±æ›ä¸‹ä¸€è¡Œï¼‰
  - ğŸ¯ whitespace-nowrap: æŒ‰éˆ•æ–‡å­—ä¸å‡†æ›è¡Œï¼ˆä¿æŒæŒ‰éˆ•æ•´é½Šï¼‰
  - âœ¨ font-smoothing: è®“æ‰€æœ‰æ‰‹æ©Ÿçš„å­—é«”éƒ½è®Šå¾—ä¸€æ¨£æ¼‚äº®ï¼ˆçµ±ä¸€å­—é«”é¡¯ç¤ºæ•ˆæœï¼‰
  - ğŸ“ éŸ¿æ‡‰å¼è¨­è¨ˆ: å°è¢å¹•è‡ªå‹•ä½¿ç”¨å°ä¸€é»çš„å­—é«”å’ŒæŒ‰éˆ•ï¼ˆåƒè¡£æœæœ‰ S/M/L ä¸åŒå°ºå¯¸ï¼‰
  
  ğŸ” å¸¸è¦‹å•é¡Œï¼š
  - Redmi 10C + Chrome: é¡¯ç¤ºæ­£å¸¸ âœ…
  - Redmi 10C + Firefox: å¡ç‰‡å¤ªå¯¬ â†’ ç”¨ min-width: 0 å’Œ flex-shrink: 1 ä¿®æ­£
  - Galaxy S53: é¡¯ç¤ºæ­£å¸¸ â†’ ç¢ºä¿ä¿®æ”¹ä¸æœƒå½±éŸ¿æ­£å¸¸é¡¯ç¤º
  - Chrome DevTools: é–‹ç™¼å·¥å…·æ­£å¸¸ â†’ ä¿æŒæ¡Œé¢ç‰ˆçš„ç›¸å®¹æ€§
  
  ğŸ¦Š Firefox ç‰¹æ®Šè™•ç†ï¼š
  - Firefox å° flexbox å¯¬åº¦è¨ˆç®—æ¯” Chrome æ›´åš´æ ¼
  - éœ€è¦æ˜ç¢ºå‘Šè¨´ Firefoxã€Œé€™å€‹å…ƒç´ å¯ä»¥æ”¶ç¸®ã€(flex-shrink: 1)
  - éœ€è¦æ˜ç¢ºå‘Šè¨´ Firefoxã€Œæœ€å°å¯¬åº¦æ˜¯ 0ã€(min-width: 0)
  - åŠ ä¸Š overflow-hidden é˜²æ­¢å…§å®¹æº¢å‡º
  
  ğŸ’­ è¨˜ä½ï¼šå¥½çš„è¨­è¨ˆå°±åƒé­”è¡“ä¸€æ¨£ï¼Œåœ¨ä»»ä½•è£ç½®å’Œä»»ä½•ç€è¦½å™¨ä¸Šéƒ½èƒ½å®Œç¾é¡¯ç¤ºï¼
-->

<template>
  <!-- ğŸ¯ ç´”æ¸²æŸ“å¡ç‰‡çµ„ä»¶ - å…±ç”¨ mobile/desktop -->
  <div 
    class="bg-white rounded px-3 py-3 mb-2 shadow-sm transition-all duration-200 hover:shadow-md relative group min-h-16 cursor-pointer card-draggable focus:outline-none max-w-full overflow-hidden"
    :class="{ 'card-dragging': dragging }"
    @click="openCardModal"
    tabindex="-1"
  >
    <!-- é¡¯ç¤ºæ¨¡å¼ï¼šé¡¯ç¤ºå¡ç‰‡æ¨™é¡Œ -->
    <div 
      v-if="!isEditing" 
      class="min-h-6 pr-8 pb-6 relative"
    >
      <!-- å‹¾é¸æ¡† - æ°¸ä¹…é¡¯ç¤ºå·²å‹¾é¸ç‹€æ…‹ï¼Œhover æ™‚é¡¯ç¤ºæœªå‹¾é¸ -->
      <div 
        class="absolute left-0 top-0.5 flex-shrink-0 w-4 h-4 transition-all duration-200 z-10"
        :class="isChecked ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'"
        @click.stop="toggleCheckbox"
      >
        <div 
          class="w-full h-full rounded-full border-2 flex items-center justify-center cursor-pointer transition-all duration-200"
          :class="isChecked ? 'bg-green-500 border-green-500' : 'border-gray-400 hover:border-gray-600'"
        >
          <svg 
            v-if="isChecked"
            class="w-2.5 h-2.5 text-white" 
            fill="currentColor" 
            viewBox="0 0 20 20"
          >
            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
          </svg>
        </div>
      </div>
      
      <!-- å¡ç‰‡æ¨™é¡Œ - é…·ç‚«çš„ä½ç§»æ•ˆæœï¼šæœª hover æ™‚ä½”æ»¿å¯¬åº¦ï¼Œhover æ™‚å¾€å³è®“å‡ºç©ºé–“ -->
      <div 
        class="transition-all duration-200 break-words overflow-hidden"
        :class="{ 
          'text-gray-500': isChecked,
          'ml-0 group-hover:ml-6': !isChecked,
          'ml-6': isChecked
        }"
      >
        {{ card.title }}
      </div>
    </div>
      <!-- @dblclick="startEditing" -->
    
    <!-- åº•éƒ¨åœ–ç¤ºå€åŸŸ -->
    <div v-if="!isEditing" class="absolute bottom-2 left-3 right-3 flex justify-between items-center">
      <!-- å·¦ä¸‹è§’ï¼šæè¿°åœ–ç¤ºï¼ˆç•¶æœ‰æè¿°æ™‚é¡¯ç¤ºï¼‰ -->
      <div v-if="card.description && card.description.trim()" class="flex items-center">
        <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
        </svg>
      </div>
      <div v-else></div>
      
      <!-- å³ä¸‹è§’ï¼šç‹€æ…‹å’Œå„ªå…ˆé †åºæŒ‰éˆ• -->
      <div class="flex gap-2 flex-shrink-0">
        <!-- ç‹€æ…‹æŒ‰éˆ• -->
        <button
          @click.stop="toggleStatus"
          class="text-xs px-2 py-1 rounded-sm font-medium transition-colors whitespace-nowrap"
          :class="getStatusClass(card.status || CardStatus.TODO)"
        >
          {{ getStatusLabel(card.status || CardStatus.TODO) }}
        </button>
        
        <!-- å„ªå…ˆé †åºæŒ‰éˆ• -->
        <button
          @click.stop="togglePriority"
          class="flex items-center gap-1 text-xs px-2 py-1 rounded-sm font-medium transition-colors hover:bg-gray-100 whitespace-nowrap"
        >
          <span>{{ getPriorityEmoji(card.priority || CardPriority.MEDIUM) }}</span>
          <span>{{ getPriorityLabel(card.priority || CardPriority.MEDIUM) }}</span>
        </button>
      </div>
    </div>
    
    <!-- åˆªé™¤æŒ‰éˆ• - åªåœ¨ hover æ™‚é¡¯ç¤º -->
    <button 
      v-if="!isEditing"
      @click.stop="deleteCard"
      class="absolute top-2 right-2 p-1 rounded hover:bg-red-100 transition-colors duration-200 opacity-100' : 'opacity-0 group-hover:opacity-100"
      title="åˆªé™¤å¡ç‰‡"
    >
      <svg 
        class="w-4 h-4 text-red-600 hover:text-red-800" 
        fill="none"
        stroke="currentColor" 
        viewBox="0 0 24 24"
      >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>
    
    <!-- ç·¨è¼¯æ¨¡å¼ï¼šé¡¯ç¤ºè¼¸å…¥æ¡† -->
    <input
      v-else
      ref="editInput"
      v-model="editingTitle"
      @keydown.enter="saveEdit"
      @keydown.escape="cancelEdit"
      @blur="saveEdit"
      class="w-full bg-transparent border-none outline-none min-h-6"
      type="text"
    />
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { formatStatus, getStatusTagClass } from '@/utils/statusFormatter'
import type { CardUI } from '@/types'
import { CardStatus, CardPriority } from '@/types/api'

// ä½¿ç”¨çµ±ä¸€çš„å¡ç‰‡å‹åˆ¥å®šç¾©
type Card = CardUI

// ğŸ¯ ç´”æ¸²æŸ“çµ„ä»¶ï¼šæ¥æ”¶çˆ¶çµ„ä»¶å‚³å…¥çš„è³‡æ–™å’Œç‹€æ…‹
const props = defineProps<{
  card: Card
  dragging: boolean  // çˆ¶çµ„ä»¶æ§åˆ¶çš„æ‹–æ‹½ç‹€æ…‹
  isMobile?: boolean  // æ˜¯å¦ç‚ºæ‰‹æ©Ÿç‰ˆ
}>()

// ğŸ¯ ç´”æ¸²æŸ“çµ„ä»¶ï¼šå®šç¾©äº‹ä»¶ (çˆ¶çµ„ä»¶è™•ç†é‚è¼¯)
const emit = defineEmits<{
  openModal: [card: Card]
  delete: [card: Card]
  updateTitle: [cardId: string, newTitle: string]
  dragStart: [card: Card, type: 'card']
  dragEnd: []
  updateStatus: [cardId: string, status: CardStatus]
  updatePriority: [cardId: string, priority: CardPriority]
}>()


// ç·¨è¼¯ç‹€æ…‹ç®¡ç†
const isEditing = ref(false)
const editingTitle = ref('')
const editInput = ref<HTMLInputElement | null>(null)

// å‹¾é¸ç‹€æ…‹ç®¡ç†
const isChecked = ref(false)

// ğŸ¯ ç´”æ¸²æŸ“ï¼šåˆ‡æ›å‹¾é¸ç‹€æ…‹ï¼ˆæœ¬åœ° UI ç‹€æ…‹ï¼‰
const toggleCheckbox = () => {
  isChecked.value = !isChecked.value
  console.log(`ğŸ“‹ [PURE-CARD] æœ¬åœ°å‹¾é¸ç‹€æ…‹: ${props.card.title} -> ${isChecked.value ? 'å·²å®Œæˆ' : 'æœªå®Œæˆ'}`)
  // ç´”æ¸²æŸ“çµ„ä»¶ä¸è™•ç†æ¥­å‹™é‚è¼¯ï¼Œåªç®¡ç† UI ç‹€æ…‹
}

// é–‹å§‹ç·¨è¼¯ï¼ˆç›®å‰å·²åœç”¨ï¼Œä½†ä¿ç•™ä»¥å‚™å¾Œç”¨ï¼‰
// const startEditing = () => {
//   isEditing.value = true
//   editingTitle.value = props.card.title
//   
//   // ä¸‹ä¸€å€‹ tick å¾Œèšç„¦åˆ°è¼¸å…¥æ¡†ä¸¦é¸å–æ‰€æœ‰æ–‡å­—
//   nextTick(() => {
//     if (editInput.value) {
//       editInput.value.focus()
//       editInput.value.select()
//     }
//   })
// }

// ğŸ¯ ç´”æ¸²æŸ“ï¼šå„²å­˜ç·¨è¼¯ (å§”æ´¾çµ¦çˆ¶çµ„ä»¶)
const saveEdit = () => {
  const newTitle = editingTitle.value.trim()
  if (newTitle && newTitle !== props.card.title) {
    // å§”æ´¾çµ¦çˆ¶çµ„ä»¶è™•ç†æ¥­å‹™é‚è¼¯
    emit('updateTitle', props.card.id, newTitle)
  } else {
    // å¦‚æœæ˜¯ç©ºå­—ä¸²æˆ–ç„¡è®ŠåŒ–ï¼Œæ¢å¾©åŸå§‹æ¨™é¡Œ
    editingTitle.value = props.card.title
  }
  isEditing.value = false
}

// å–æ¶ˆç·¨è¼¯
const cancelEdit = () => {
  isEditing.value = false
  editingTitle.value = props.card.title
}

// ğŸ¯ ç´”æ¸²æŸ“ï¼šé–‹å•Ÿå¡ç‰‡æ¨¡æ…‹æ¡†
const openCardModal = () => {
  emit('openModal', props.card)
}

// ğŸ¯ ç´”æ¸²æŸ“ï¼šåˆªé™¤å¡ç‰‡ (å§”æ´¾çµ¦çˆ¶çµ„ä»¶)
const deleteCard = () => {
  console.log('ğŸ—‘ï¸ [PURE-CARD] åˆªé™¤äº‹ä»¶ï¼Œå§”æ´¾çµ¦çˆ¶çµ„ä»¶:', props.card.title)
  emit('delete', props.card)
}

// ç‹€æ…‹æ¨™ç±¤æ¨£å¼
const getStatusClass = (status: CardStatus) => {
  switch (status) {
    case CardStatus.TODO:
      return 'bg-gray-100 text-gray-700 hover:bg-gray-200'
    case CardStatus.DOING:
      return 'bg-blue-100 text-blue-700 hover:bg-blue-200'
    case CardStatus.DONE:
      return 'bg-green-100 text-green-700 hover:bg-green-200'
    default:
      return 'bg-gray-100 text-gray-700 hover:bg-gray-200'
  }
}

// ç‹€æ…‹æ¨™ç±¤æ–‡å­—
const getStatusLabel = (status: CardStatus) => {
  switch (status) {
    case CardStatus.TODO:
      return 'Todo'
    case CardStatus.DOING:
      return 'Doing'
    case CardStatus.DONE:
      return 'Done'
    default:
      return 'Todo'
  }
}

// å„ªå…ˆé †åº emoji
const getPriorityEmoji = (priority: CardPriority) => {
  switch (priority) {
    case CardPriority.HIGH:
      return 'ğŸ”´'
    case CardPriority.MEDIUM:
      return 'ğŸŸ¡'
    case CardPriority.LOW:
      return 'ğŸŸ¢'
    default:
      return 'ğŸŸ¡'
  }
}

// å„ªå…ˆé †åºæ¨™ç±¤
const getPriorityLabel = (priority: CardPriority) => {
  switch (priority) {
    case CardPriority.HIGH:
      return 'High'
    case CardPriority.MEDIUM:
      return 'Medium'
    case CardPriority.LOW:
      return 'Low'
    default:
      return 'Medium'
  }
}

// åˆ‡æ›ç‹€æ…‹ï¼ˆå¾ªç’°ï¼šTodo â†’ Doing â†’ Done â†’ Todoï¼‰
const toggleStatus = () => {
  const currentStatus = props.card.status || CardStatus.TODO
  let newStatus: CardStatus
  
  switch (currentStatus) {
    case CardStatus.TODO:
      newStatus = CardStatus.DOING
      break
    case CardStatus.DOING:
      newStatus = CardStatus.DONE
      break
    case CardStatus.DONE:
      newStatus = CardStatus.TODO
      break
    default:
      newStatus = CardStatus.TODO
  }
  
  emit('updateStatus', props.card.id, newStatus)
}

// åˆ‡æ›å„ªå…ˆé †åºï¼ˆå¾ªç’°ï¼šHigh â†’ Medium â†’ Low â†’ Highï¼‰
const togglePriority = () => {
  const currentPriority = props.card.priority || CardPriority.MEDIUM
  let newPriority: CardPriority
  
  switch (currentPriority) {
    case CardPriority.HIGH:
      newPriority = CardPriority.MEDIUM
      break
    case CardPriority.MEDIUM:
      newPriority = CardPriority.LOW
      break
    case CardPriority.LOW:
      newPriority = CardPriority.HIGH
      break
    default:
      newPriority = CardPriority.MEDIUM
  }
  
  emit('updatePriority', props.card.id, newPriority)
}

</script>

<style scoped>
/* ğŸ¯ é˜²æ­¢å¡ç‰‡å‡ºç¾è—è‰²å¤–æ¡† - è§£æ±ºæ‹–æ‹½å¾Œçš„ focus å•é¡Œ */
.card-draggable {
  outline: none !important;
  /* ç¢ºä¿å¡ç‰‡ä¸æœƒè¶…å‡ºå®¹å™¨å¯¬åº¦ */
  box-sizing: border-box;
  word-wrap: break-word;
  /* é‡å°ä¸åŒè£ç½®çš„å­—é«”æ¸²æŸ“ä¸€è‡´æ€§ */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  
  /* ğŸ¦Š Firefox å°ˆç”¨ä¿®æ­£ï¼šå¼·åˆ¶å®¹å™¨å¯¬åº¦é™åˆ¶ */
  min-width: 0;
  flex-shrink: 1;
  /* ğŸ¦Š Firefox å° flexbox è¨ˆç®—æ–¹å¼ä¸åŒï¼Œéœ€è¦æ˜ç¢ºæŒ‡å®š */
  width: 100%;
  max-width: 100%;
}

.card-draggable:focus {
  outline: none !important;
  /* ä¿æŒåŸæœ‰çš„ shadowï¼Œåªç§»é™¤å¯èƒ½çš„è—è‰²é‚Šæ¡† */
}

/* ğŸ¯ ç¢ºä¿æ‹–æ‹½éç¨‹ä¸­ä¸æœƒå‡ºç¾è—è‰²é‚Šæ¡† */
.card-draggable.sortable-chosen,
.card-draggable.sortable-ghost {
  outline: none !important;
}

/* ğŸ¯ é˜²æ­¢ç€è¦½å™¨é è¨­çš„é¸å–æ¨£å¼é€ æˆè—è‰²å¤–æ¡† */
.card-draggable::selection {
  background: transparent;
}

.card-draggable::-moz-selection {
  background: transparent;
}

/* ğŸ¯ é‡å°å¯èƒ½çš„æ‹–æ‹½åº«æ¨£å¼è¦†è“‹ */
.card-draggable[data-sortable] {
  outline: none !important;
}

/* 
ğŸ¯ é‡å°ä¸åŒè£ç½®çš„éŸ¿æ‡‰å¼å­—é«”èª¿æ•´ 
ğŸ§’ åæ­²å°æœ‹å‹è§£é‡‹ï¼šå°±åƒè¡£æœæœ‰ä¸åŒå°ºå¯¸ï¼Œç¶²é åœ¨å°è¢å¹•ä¸Šä¹Ÿè¦ç”¨å°ä¸€é»çš„å­—é«”å’ŒæŒ‰éˆ•
*/
@media screen and (max-width: 768px) {
  .card-draggable {
    font-size: 14px;        /* ğŸ“± æ‰‹æ©Ÿç”¨ç¨å¾®å°ä¸€é»çš„å­—é«” */
    min-width: 0;           /* ğŸ”§ å…è¨±å¡ç‰‡æ”¶ç¸®åˆ°æœ€å°å¯¬åº¦ */
    width: 100%;            /* ğŸ“ ç¢ºä¿å¡ç‰‡ä½”æ»¿å®¹å™¨å¯¬åº¦ */
  }
  
  /* ğŸ”˜ ç¢ºä¿æŒ‰éˆ•åœ¨å°è¢å¹•ä¸Šä¸æœƒå¤ªæ“  */
  .card-draggable button {
    font-size: 11px;        /* ğŸ“± æŒ‰éˆ•æ–‡å­—æ›´å°ä¸€é» */
    padding: 4px 8px;       /* ğŸ“ æŒ‰éˆ•å…§è·ç¸®å°ï¼Œé¿å…æ“ åœ¨ä¸€èµ· */
  }
}

/* ğŸ¦Š Firefox å°ˆç”¨å¼·åˆ¶æ€§ä¿®æ­£ - é‡å° Redmi 10C çš„å¯¬åº¦å•é¡Œ */
@-moz-document url-prefix() {
  .card-draggable {
    max-width: 100% !important;
    width: 100% !important;
    min-width: 0 !important;
    box-sizing: border-box !important;
    overflow: hidden !important;
    display: block !important;
  }
  
  .card-draggable * {
    max-width: 100% !important;
    box-sizing: border-box !important;
  }
}

/*
ğŸ¨ è·¨è£ç½®å’Œè·¨ç€è¦½å™¨ç›¸å®¹æ€§èªªæ˜ï¼š
- é€™äº›æ¨£å¼ç¢ºä¿å¡ç‰‡åœ¨ Redmi 10Cã€Galaxy S53ã€iPhone ç­‰ä¸åŒè£ç½®ä¸Šéƒ½èƒ½æ­£å¸¸é¡¯ç¤º
- font-smoothing è®“å­—é«”åœ¨ä¸åŒ Android ç‰ˆæœ¬ä¸Šçœ‹èµ·ä¾†ä¸€è‡´
- break-words é˜²æ­¢é•·æ–‡å­—æ’ç ´å¡ç‰‡
- éŸ¿æ‡‰å¼è¨­è¨ˆè®“å°è¢å¹•è‡ªå‹•èª¿æ•´å…ƒç´ å¤§å°

ğŸ¦Š Firefox vs ğŸŒŸ Chrome å·®ç•°è™•ç†ï¼š
- Firefox å° flexbox çš„å¯¬åº¦è¨ˆç®—æ›´åš´æ ¼ï¼Œéœ€è¦æ˜ç¢ºè¨­å®š min-width: 0
- Chrome æ¯”è¼ƒå¯¬é¬†ï¼Œæœƒè‡ªå‹•è™•ç†å®¹å™¨æº¢å‡ºå•é¡Œ
- åŠ ä¸Š overflow-hidden ç¢ºä¿å…©å€‹ç€è¦½å™¨éƒ½èƒ½æ­£ç¢ºè£åˆ‡å…§å®¹
- flex-shrink: 1 è®“ Firefox çŸ¥é“é€™å€‹å…ƒç´ å¯ä»¥æ”¶ç¸®
- @-moz-document æ˜¯ Firefox å°ˆç”¨çš„å¼·åˆ¶æ€§ä¿®æ­£ï¼Œç¢ºä¿åœ¨ Redmi 10C ä¸Šæ­£å¸¸é¡¯ç¤º

ğŸ§’ åæ­²å°æœ‹å‹è§£é‡‹ï¼š
å°±åƒä¸åŒå“ç‰Œçš„å°ºå­å¯èƒ½æœ‰ç´°å¾®å·®ç•°ï¼ŒFirefox å’Œ Chrome æ¸¬é‡å¯¬åº¦çš„æ–¹å¼ä¹Ÿç¨å¾®ä¸åŒ
æˆ‘å€‘è¦çµ¦å…©ç¨®å°ºå­éƒ½èƒ½ç†è§£çš„æ˜ç¢ºæŒ‡ç¤ºï¼
ç¾åœ¨é‚„åŠ ä¸Šäº†ã€ŒFirefox å°ˆç”¨èªªæ˜æ›¸ã€ï¼Œç¢ºä¿å®ƒä¸€å®šè½å¾—æ‡‚ï¼
*/
</style>